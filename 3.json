{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 700,
    "height": 300,
    "title": "Death & Injury Rate per 10,000 Population (2007-2017)",
    "data": {
    "url": "https://raw.githubusercontent.com/HongnuoLyu/FIT3179_Assignment2/main/%E5%9B%BE3%E6%AD%BB%E4%BA%A1%E5%8F%97%E4%BC%A4.csv"
    },
    "params": [
        {
        "name": "Type_Selection",
        "bind": {
        "input": "select",
        "options": [
        null,
        "Death",
        "Injury"
        ],
        "labels":[
        "Show All",
        "Death Rate",
        "Injury Rate"
        ],
        "name": "Rate Type:"
        }
        }
        ],
    "transform": [
        {"filter": "Type_Selection == null || datum.Type == Type_Selection"}],
    "encoding": {
    "y": {
    "field": "Rate",
    "type": "quantitative",
    "title": "Death/ Injury Rate"
    },
    "x": {
    "field": "Year",
    "type": "ordinal",
    "axis": {"labelAngle": 0}
    }
},    
    "layer":[
    {"mark": "trail",
    "encoding": {
    "color": {
               "field": "Type",
               "type": "nominal",
            "scale":{
                "range":["#e41a1c","#fa9fb5"]
            }},
    "size": {"field":"Rate","type":"quantitative"},
    "tooltip": [
        {"field": "Year", "type": "ordinal"},
        {"field": "Type", "type": "nominal"},
        {"field": "Rate", "type": "quantitative", "format":","}]
}},{
    "mark": {
        "type":"text",
        "align": "center",
        "baseline": "line-bottom"
       },
"encoding": {
    "text": {"field": "Rate", 
             "type": "quantitative", 
             "format": ".3f"
            },
    "opacity": {
        "condition": {
        "test": "Type_Selection == null",
        "value": 0
        },
        "value": 1
        },        
"tooltip": [ 
    {"field": "Year", "type": "ordinal"},
    {"field": "Type", "type": "nominal"},
    {"field": "Rate", "type": "quantitative", "format":","}
   
]
}
}]}
    